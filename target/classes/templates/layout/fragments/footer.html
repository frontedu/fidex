<!-- Footer -->
<footer class="footer" sec:authorize="isAuthenticated()">
    <!-- Profile Button - Opens Modal -->
    <label class="user-profile" for="modal-toggle-user" style="cursor: pointer;">
        <span>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256">
                <path
                    d="M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z">
                </path>
            </svg>
        </span>
        <span sec:authentication="principal.username"></span>
    </label>

    <!-- Usando tags semânticas alternativas para evitar o seletor .footer div -->
    <section class="fidex-settings-modal">
        <input type="checkbox" id="modal-toggle-user" style="display: none !important;">
        <label class="modal-backdrop" for="modal-toggle-user"></label>
        <article class="modal-content">
            <h2>Configurações</h2>
            <form th:action="@{/perfil/cashback}" method="POST" class="form">
                <aside class="input-group">
                    <!-- Classe filled adicionada manualmente pois o valor já vem preenchido -->
                    <input type="number" id="cashback" name="cashback" min="0" max="100" step="0.1"
                        th:value="${cashbackPercent != null ? cashbackPercent : 5}" class="filled" />
                    <label for="cashback">Cashback (%)</label>
                </aside>
                <p style="font-size: 0.8rem; color: var(--c-gray-500); margin-bottom: 16px;">
                    Define a porcentagem de pontos que o cliente ganha por compra (0-100%).
                </p>
                <input type="submit" value="Salvar configurações" class="btn button_slide slide_right">
            </form>
        </article>
    </section>

    <!-- footer-bottom permanece como div pois ele DEVE receber o estilo de borda/padding do rodapé -->
    <div class="footer-bottom">
        2026 © Fidex
    </div>
</footer>